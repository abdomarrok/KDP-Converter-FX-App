<!-- Created with Jaspersoft Studio version 7.0.0.final using JasperReports Library version 7.0.0-b478feaa9aab4375eba71de77b4ca138ad2f62aa  -->
<jasperReport name="InventaireReportArabic" language="java" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="c5b33e49-a311-488b-a33b-1c1b6a447ae6" summaryWithPageHeaderAndFooter="true">
	<property name="net.sf.jasperreports.awt.ignore.missing.font" value="true"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="invlouiza"/>
	<parameter name="logo" class="java.lang.Object"/>
	<parameter name="entreprise_name" class="java.lang.String"/>
	<parameter name="ministry_name" class="java.lang.String"/>
	<parameter name="startDate" class="java.lang.Integer"/>
	<parameter name="serviceId" class="java.lang.Integer"/>
	<parameter name="localisationId" class="java.lang.Integer"/>
	<parameter name="selectedServiceName" class="java.lang.String"/>
	<parameter name="currentDate" class="java.lang.String"/>
	<parameter name="selectedLocalisationName" class="java.lang.String"/>
	<query language="sql"><![CDATA[
SELECT
    ii.id,
    ii.id_article,
    a.name AS article_name,
    ii.id_localisation,
    l.loc_name AS localisation_name,
    s.name AS service_name,
    ii.user_id,
    ii.time,
    ii.num_inventaire,
    ii.status,
    ii.id_employer,
    e.firstname AS employer_firstname,
    e.lastname AS employer_lastname,
    e.title AS employer_title,
    CONCAT(e.firstname, ' ', e.lastname) AS employer_fullname,
    (
        SELECT COUNT(*)
        FROM inventaire_item ii2
        JOIN localisation l2 ON ii2.id_localisation = l2.id
        WHERE
            ($P{serviceId} IS NULL OR l2.id_service = $P{serviceId})
            AND ($P{localisationId} IS NULL OR ii2.id_localisation = $P{localisationId})
            AND YEAR(ii2.time) = $P{startDate}
    ) AS total_articles
FROM
    inventaire_item ii
JOIN
    article a ON ii.id_article = a.id
JOIN
    localisation l ON ii.id_localisation = l.id
LEFT JOIN
    service s ON l.id_service = s.id
LEFT JOIN
    employeur e ON ii.id_employer = e.id
WHERE
    ($P{serviceId} IS NULL OR l.id_service = $P{serviceId})
    AND ($P{localisationId} IS NULL OR ii.id_localisation = $P{localisationId})
    AND YEAR(ii.time) = $P{startDate};
    ]]></query>
	<field name="id" class="java.lang.Integer"/>
	<field name="id_article" class="java.lang.Integer"/>
	<field name="article_name" class="java.lang.String"/>
	<field name="id_localisation" class="java.lang.Integer"/>
	<field name="localisation_name" class="java.lang.String"/>
	<field name="service_name" class="java.lang.String"/>
	<field name="user_id" class="java.lang.Integer"/>
	<field name="time" class="java.sql.Timestamp"/>
	<field name="num_inventaire" class="java.lang.String"/>
	<field name="status" class="java.lang.String"/>
	<field name="id_employer" class="java.lang.Integer"/>
	<field name="total_articles" class="java.lang.Integer"/>
	<field name="employer_firstname" class="java.lang.String"/>
	<field name="employer_lastname" class="java.lang.String"/>
	<field name="employer_title" class="java.lang.String"/>
	<field name="employer_fullname" class="java.lang.String"/>
	<group name="GlobalGroup">
		<expression><![CDATA[1]]></expression>
		<groupFooter>
			<band height="80" splitType="Prevent">
				<element kind="staticText" uuid="8b5a7e99-e011-4b6b-8f1d-31d5c1b86464" x="425" y="5" width="100" height="20" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Left">
					<text><![CDATA[المجموع الكلي:]]></text>
				</element>
				<element kind="textField" uuid="410483f6-069a-4335-93fa-40a7ba3cb9a8" x="325" y="5" width="100" height="20" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Right">
					<expression><![CDATA[$F{total_articles}]]></expression>
				</element>
				<element kind="staticText" uuid="7bd9bb26-5ca3-4e92-9954-bc383b0122cd" x="60" y="35" width="180" height="40" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center">
					<text><![CDATA[إمضاء مسؤول مصلحة الوسائل العامة]]></text>
				</element>
				<element kind="staticText" uuid="1a99f68d-db59-4007-b63d-1bfbffa2b4a8" x="370" y="35" width="100" height="40" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center">
					<text><![CDATA[إمضاء مسؤول المكان]]></text>
				</element>
			</band>
		</groupFooter>
	</group>
	<title height="214">
		<element kind="staticText" uuid="7016495c-3fec-414e-95a6-f70bfd7dc4fd" x="57" y="-10" width="440" height="30" fontName="Traditional Arabic" fontSize="18.0" bold="true" hTextAlign="Center">
			<text><![CDATA[الجمهورية الجزائرية الديمقراطية الشعبية]]></text>
		</element>
		<element kind="textField" uuid="8e6ad460-3b40-42be-b7c5-c9b789499a63" x="57" y="20" width="440" height="30" fontName="Traditional Arabic" fontSize="18.0" bold="true" hTextAlign="Center">
			<expression><![CDATA[$P{ministry_name}]]></expression>
		</element>
		<element kind="textField" uuid="494d87cb-bc61-4cda-8737-e7410077b706" x="57" y="50" width="440" height="30" fontName="Traditional Arabic" fontSize="18.0" bold="true" hTextAlign="Center">
			<expression><![CDATA[$P{entreprise_name}]]></expression>
		</element>
		<element kind="staticText" uuid="fd868f22-3db2-486b-a9d8-193205baacf4" x="147" y="130" width="260" height="30" fontName="Traditional Arabic" fontSize="19.0" bold="true" hTextAlign="Center">
			<text><![CDATA[ بطاقة الجرد]]></text>
		</element>
		<element kind="image" uuid="be472a83-68e7-4ccb-943c-7973067e7fcd" x="252" y="70" width="50" height="50">
			<expression><![CDATA[$P{logo}]]></expression>
		</element>
		<element kind="textField" uuid="259b6d4f-90f2-45b4-9468-bb488dde6492" x="340" y="185" width="100" height="20" hTextAlign="Center" vTextAlign="Middle">
			<expression><![CDATA[$P{selectedLocalisationName}]]></expression>
		</element>
		<element kind="staticText" uuid="fcf0c65f-6b89-458f-b9a3-52af22a6601b" mode="Opaque" x="454" y="180" width="100" height="30" backcolor="#CCCCCC" fontName="Traditional Arabic" fontSize="14.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[المكان]]></text>
		</element>
	</title>
	<columnHeader height="27">
		<element kind="staticText" uuid="3ab6845e-94ad-4676-8042-ea0be1d3d4ee" mode="Opaque" x="215" y="7" width="310" height="20" backcolor="#CCCCCC" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[إسم العنصر]]></text>
			<box>
				<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="f1bd9eba-2c8e-48d6-9e8c-6569a0a35889" mode="Opaque" x="115" y="7" width="100" height="20" backcolor="#CCCCCC" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[رقم الجرد]]></text>
			<box>
				<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="641ed749-4bbe-4bc3-8c91-16208980d78c" mode="Opaque" x="40" y="7" width="75" height="20" backcolor="#CCCCCC" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[الحالة]]></text>
			<box>
				<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<element kind="staticText" uuid="e6a6b72c-bca8-41ee-bef3-3ea85c2f95d6" mode="Opaque" x="525" y="7" width="30" height="20" backcolor="#CCCCCC" fontName="Traditional Arabic" fontSize="12.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[رقم]]></text>
			<box>
				<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
			</box>
		</element>
		<property name="com.jaspersoft.studio.unit.height" value="px"/>
	</columnHeader>
	<detail>
		<band height="20">
			<element kind="textField" uuid="8cf56462-42e3-4ac0-bdf3-479fca88a777" stretchType="ContainerHeight" x="40" y="0" width="75" height="20" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{status}]]></expression>
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="c7a5883a-6cea-4930-9b65-0658f6c1517f" stretchType="ContainerHeight" x="115" y="0" width="100" height="20" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{num_inventaire}]]></expression>
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="933c74be-60b5-4269-a4b6-4c9645585b88" stretchType="NoStretch" x="215" y="0" width="310" height="20" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{article_name}]]></expression>
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="0c92fdb5-2ec1-45fd-b1ea-d71c541ba1be" stretchType="NoStretch" x="525" y="0" width="30" height="20" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$V{REPORT_COUNT}]]></expression>
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</band>
	</detail>
	<pageFooter height="20">
		<element kind="textField" uuid="ae2caa40-73ba-48f9-ae21-3061829d6ff8" x="0" y="0" width="30" height="20" hTextAlign="Right">
			<expression><![CDATA[ $V{PAGE_NUMBER}+ "/"]]></expression>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</element>
		<element kind="textField" uuid="99c9f906-f78b-46bd-b416-5b1d7af15818" x="30" y="0" width="27" height="20" evaluationTime="Report" hTextAlign="Left">
			<expression><![CDATA[ $V{PAGE_NUMBER}]]></expression>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</element>
		<property name="com.jaspersoft.studio.unit.height" value="px"/>
	</pageFooter>
	<lastPageFooter height="20">
		<element kind="textField" uuid="7ed1598b-a072-4650-bfca-f426f83f1d5f" x="0" y="0" width="30" height="20" hTextAlign="Right">
			<expression><![CDATA[ $V{PAGE_NUMBER}+ "/"]]></expression>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</element>
		<element kind="textField" uuid="92afcbcf-9d21-465a-a0f9-30075e03e463" x="30" y="0" width="27" height="20" evaluationTime="Report" hTextAlign="Left">
			<expression><![CDATA[ $V{PAGE_NUMBER}]]></expression>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</element>
		<property name="com.jaspersoft.studio.unit.height" value="px"/>
	</lastPageFooter>
	<summary/>
</jasperReport>
